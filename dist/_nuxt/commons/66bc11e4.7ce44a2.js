(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{722:function(t,e,n){var content=n(948);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(18).default)("140a1e1e",content,!0,{sourceMap:!1})},723:function(t,e,n){var content=n(950);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(18).default)("6e88058f",content,!0,{sourceMap:!1})},729:function(t,e,n){"use strict";n(388),n(45),n(19),n(62),n(709),n(151),n(107),n(108),n(943);var o=n(647),r=n.n(o),c=n(731),m=n(2),d=n(946);m.a.use(d.a);var l=new d.a.Store({state:{auth:localStorage.getItem("auth")||"",user:{},comment:{}},mutations:{auth_success:function(t,e){t.auth=e,t.user=e.user},logout:function(t){t.auth="",t.user=""},changeComment:function(t,e){t.comment=e}},actions:{ChangeComment:function(t,e){(0,t.commit)("changeComment",e)}},getters:{getComment:function(t){return t.comment},userRole:function(t){return""==t.auth?null:0===t.auth.user.permissions?"user":"admin"===t.auth.user.permissions[0]?"admin":void 0}}}),h=n(0),f={name:"node",props:{comment:Array,depth:Number,parent:Array,index:Number,id:String,type:String,pageData:Object,newUser:Object},data:function(){return{inc:0,prevReply:"",buttonDisabled:!1,showUnacceptableCommentMssg:!1,auth:void 0,newComment:{text:""},isBanned:!1,isReady:!1,loading:!0,showDialog:!1}},created:function(){this.$nextTick((function(){this.loading=!1}))},mounted:function(){this.comment&&this.comment[0]&&(this.isReady=!0);var t=void 0;this.$aes.setKey("SECURE_VAL_PW");var e=localStorage.getItem("auth");e&&(t=JSON.parse(this.$aes.decrypt(e))),this.newUser&&(this.auth=this.newUser,this.newComment.userId=t.user._id)},methods:{toogleDialogEmoji:function(){this.showDialog=!this.showDialog},selectEmoji:function(t){this.newComment.text+=t.data},getComment:function(t){for(var i=0;i<this.comment.length;i++)if(this.comment[i]._id===t)return this.comment[i]},formatDate:function(t){var e=h.utc(t).local();return h(e).format("DD-MM-YYYY h:mm a")},reply:function(t,e){if(this.showDialog=!1,this.newUser.isBanned)this.$buefy.snackbar.open("You have been banned from posting");else if(7!==e){var n=l.getters.getComment;n.replies&&n.replies.pop(),l.dispatch("ChangeComment",t),t.replies||(t.replies=[]),t.replies.push({type:"reply",userId:"5e97c24346719d261d32c912",text:"yess",replies:[],dateTime:"2020-05-09T19:50:00.927Z",createdAt:{$date:"2020-05-09T19:50:00.935Z"},updatedAt:{$date:"2020-05-09T19:50:00.935Z"},__v:0}),this.inc+=1,setTimeout((function(){document.getElementById("newComment").scrollIntoView(),window.scrollBy(0,-400)}),0)}else this.$buefy.snackbar.open("Comment depth limit reached")},isAdmin:function(t){return t&&t.permissions.length>0&&"admin"===t.permissions[0]?"admin":t&&t.permissions.length>0&&t.permissions.includes("moderator")?"moderator":"user"},submitComment:function(){var t=this;if(this.showDialog=!1,this.buttonDisabled=!0,this.newUser.isBanned)return this.buttonDisabled=!1,void this.$buefy.snackbar.open("You have been banned from posting. Contact via email to appeal.");var e=l.getters.getComment;this.newComment.dateTime=new Date,this.$axios("https://valorantify.com/api/comments",{method:"post",data:this.newComment}).then((function(t){return t.data})).then((function(n){e.repliesId||(e.repliesId=[]),e.repliesId.push(n._id),t.$axios("https://valorantify.com/api/comments/"+e._id,{method:"patch",data:e}).then((function(t){return t.data})).then((function(e){t.pageData.numComments?t.pageData.numComments+=1:t.pageData.numComments=t.pageData.commentIds.length,t.$axios("https://valorantify.com/"+"api/".concat(t.type,"/").concat(t.id),{method:"patch",headers:new Headers({"content-type":"application/json"}),data:t.pageData}).then((function(t){return t.data})).then((function(t){})),"forums"===t.type&&t.sendAtMsgNotif(e),"matches"===t.type&&t.sendAtMsgNotifMatches(e),"news"===t.type&&t.sendAtMsgNotifNews(e),window.location.reload()}))}))},sendAtMsgNotifNews:function(t){var e=l.getters.getComment;e.user.notifications[this.id]?e.user.notifications[this.id].dateTime=this.pageData.updatedAt:e.user.notifications[this.id]={type:this.type,dateTime:this.pageData.updatedAt,text:"Someone has replied to you on a news post!",slug:this.pageData.slug},this.$axios("https://valorantify.com/"+"users/".concat(e.user._id),{method:"patch",headers:new Headers({"content-type":"application/json"}),data:e.user}).then((function(t){return t.data})).then((function(t){}))},sendAtMsgNotifMatches:function(t){var e=l.getters.getComment;e.user.notifications[this.id]?e.user.notifications[this.id].dateTime=this.pageData.updatedAt:e.user.notifications[this.id]={type:this.type,dateTime:this.pageData.updatedAt,text:"Someone has replied to you on a match post!",slug:this.pageData.slug},this.$axios("https://valorantify.com/"+"users/".concat(e.user._id),{method:"patch",headers:new Headers({"content-type":"application/json"}),data:e.user}).then((function(t){return t.data})).then((function(t){}))},sendAtMsgNotif:function(t){var e=l.getters.getComment;e.user.notifications[this.id]?e.user.notifications[this.id].dateTime=this.pageData.updatedAt:e.user.notifications[this.id]={type:this.type,dateTime:this.pageData.updatedAt,text:"Someone has replied to you on a forum post!",slug:this.pageData.slug},this.$axios("https://valorantify.com/"+"users/".concat(e.user._id),{method:"patch",headers:new Headers({"content-type":"application/json"}),data:e.user}).then((function(t){return t.data})).then((function(t){}))},deleteComment:function(t){var e=this;this.$buefy.dialog.confirm({message:"Are you sure you want to delete this comment?",type:"is-dark",onConfirm:function(){e.$axios("https://valorantify.com/"+"api/comments/".concat(t._id),{method:"patch",headers:{"content-type":"application/json"},data:{isRemoved:!0}}).then((function(t){return t.data})).then((function(t){window.location.reload()}))}})},navUser:function(t){this.$router.push({path:"/user/".concat(t)})}},components:{VueMarkdown:r.a,VEmojiPicker:c.a}},y=(n(947),n(6)),v=Object(y.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.loading?t._e():n("div",{key:t.inc},[t.comment?t._e():n("div",{staticStyle:{"text-align":"left",padding:"20px"}},[n("b-skeleton",{attrs:{width:"20%",animated:!0}}),t._v(" "),n("b-skeleton",{attrs:{width:"40%",animated:!0}}),t._v(" "),n("b-skeleton",{attrs:{width:"80%",animated:!0}}),t._v(" "),n("b-skeleton",{attrs:{animated:!0}})],1),t._v(" "),t.comment?n("b-table",{staticStyle:{"padding-top":"0px",border:"0px solid #dbdbdb"},attrs:{"mobile-cards":!1,data:t.comment,striped:!0,hoverable:!1},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticStyle:{"margin-top":"5px"}}),t._v(" "),n("b-table-column",{staticStyle:{display:"block","padding-top":"0px","background-color":"#202836"},style:{"margin-left":20*t.depth+"px",width:"NaNpx","margin-top":0==t.depth?"0px":"-16px"},attrs:{field:"id"}},[e.row.type?n("div",{staticStyle:{width:"100%"},attrs:{id:"newComment"}},[n("div",{staticStyle:{padding:"10px"}},[n("b-input",{staticStyle:{resize:"none","white-space":"pre-wrap","word-wrap":"break-word",height:"150px"},attrs:{maxlength:"1500",type:"textarea","icon-right":"emoticon-outline","icon-right-clickable":""},on:{"icon-right-click":t.toogleDialogEmoji},model:{value:t.newComment.text,callback:function(e){t.$set(t.newComment,"text",e)},expression:"newComment.text"}})],1),t._v(" "),n("VEmojiPicker",{directives:[{name:"show",rawName:"v-show",value:t.showDialog,expression:"showDialog"}],staticStyle:{"background-color":"#273142",position:"absolute",right:"0",display:"block","margin-top":"-100px","z-index":"1000"},on:{select:t.selectEmoji}}),t._v(" "),n("div",{staticStyle:{"margin-left":"20px"}},[n("b-button",{staticStyle:{"background-color":"#ff726f","margin-top":"-100px+"},attrs:{id:"test",disabled:t.buttonDisabled},on:{click:t.submitComment}},[t._v("Reply")])],1),t._v(" "),n("div",[t.showUnacceptableCommentMssg?n("p",{staticStyle:{color:"red"}},[t._v("Sorry this message is not allowed.")]):t._e()])],1):t._e(),t._v(" "),void 0===e.row.type?n("div",[n("div",{staticClass:"comment-mobile"},[e.row.user&&""!==e.row.user.flag?n("span",[n("country-flag",{staticStyle:{"vertical-align":"-15px","margin-left":"-20px","margin-right":"-5px"},attrs:{country:e.row.user.flag,size:"normal"}})],1):t._e(),t._v(" "),e.row.user&&""!==e.row.user.flag?t._e():n("span",[n("country-flag",{staticStyle:{"vertical-align":"-15px","margin-left":"-20px","margin-right":"-5px"},attrs:{country:"un",size:"normal"}})],1),t._v(" "),n("b",{class:t.isAdmin(e.row.user),staticStyle:{cursor:"pointer"},on:{click:function(n){return t.navUser(e.row.user._id)}}},[t._v(t._s(e.row.user.username))]),t._v(" "),e.row.user.favPlayer&&e.row.user.favPlayer.name?n("span",{staticStyle:{"margin-left":"5px"}},[t._v("\n              |\n              "),n("span",{staticStyle:{opacity:"0.8"}},[n("b-icon",{staticStyle:{color:"#ff726f"},attrs:{icon:"heart",size:"is-small"}}),t._v("\n                "+t._s(e.row.user.favPlayer.name)+"\n              ")],1)]):t._e()]),t._v(" "),n("div",{staticClass:"word-mobile",staticStyle:{"word-wrap":"break-word"}},[e.row.replyComment?n("span",{staticStyle:{color:"#8c67ef",cursor:"pointer","max-width":"200px","word-wrap":"break-word"},on:{click:function(n){t.selectedReply=e.row.replyComment,t.clickAt(e.row.replyComment)}}},[t._v("@"+t._s(t.getComment(e.row.replyComment).user.username))]):t._e(),t._v(" "),e.row.isRemoved&&!0===e.row.isRemoved?n("div",[n("p",{staticStyle:{color:"red"}},[n("i",[t._v("This comment has been deleted")])])]):t._e(),t._v(" "),null==e.row.isRemoved||!0!==e.row.isRemoved?n("div",[n("vue-markdown",{attrs:{html:!1}},[t._v(t._s(e.row.text))])],1):t._e()]),t._v(" "),t.newUser?n("div",{staticStyle:{"margin-right":"12px"}},[!t.newUser.permissions.includes("moderator")||null!=e.row.isRemoved&&!0===e.row.isRemoved?t._e():n("div",{staticStyle:{"text-align":"right"}},[n("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"delete",size:"is-primary"},nativeOn:{click:function(n){return t.deleteComment(e.row)}}})],1)]):t._e(),t._v(" "),null==e.row.isRemoved||!0!==e.row.isRemoved?n("div",[n("div",{staticClass:"icon-comment",staticStyle:{"font-size":"11px","text-align":"right",cursor:"pointer"},on:{click:function(n){return t.reply(e.row,t.depth)}}},[n("b-icon",{attrs:{icon:"message-reply-text"}}),t._v(" "),e.row._id?n("span",[t._v(t._s(e.row._id.slice(-2).toUpperCase()))]):t._e(),t._v(" "),n("div",[t._v(t._s(t.formatDate(e.row.createdAt)))])],1)]):t._e(),t._v(" "),e.row.isRemoved&&!0===e.row.isRemoved?n("div",{staticStyle:{"font-size":"11px","text-align":"right"}},[t._v(t._s(t.formatDate(e.row.createdAt)))]):t._e()]):t._e()]),t._v(" "),e.row.replies&&e.row.replies.length?n("div",t._l(e.row.replies,(function(e,o){return n("node",{key:o,attrs:{comment:[e],parent:t.comment,index:o,depth:t.depth+1,pageData:t.pageData,type:t.type,id:t.id,newUser:t.newUser}})})),1):t._e(),t._v(" "),n("div",{staticStyle:{"margin-top":"3px"}})]}}],null,!1,2162792313)}):t._e()],1)}),[],!1,null,"6fd8a010",null).exports,w=n(0),x={name:"Characters",props:{id:String,type:String,commentsArray:Array,pageData:Object},data:function(){return{auth:void 0,comment:{text:""},data:[],users:{},buttonDisabled:!1,showUnacceptableCommentMssg:!1,isBanned:!1,replyComment:void 0,selectedReply:void 0,commentsObj:{},inc:0,forum:void 0,match:void 0,newUser:void 0,loading:!0,showDialog:!1}},created:function(){this.$nextTick((function(){this.loading=!1}))},mounted:function(){var t=this;this.$aes.setKey("SECURE_VAL_PW");var e=localStorage.getItem("auth");if(e){var n=JSON.parse(this.$aes.decrypt(e));n&&(this.auth=n,this.comment.userId=n.user._id,this.$axios("https://valorantify.com/"+"users/".concat(this.auth.user._id),{method:"get"}).then((function(t){return t.data})).then((function(e){t.newUser=e,t.isBanned=e.isBanned})))}},methods:{toogleDialogEmoji:function(){this.showDialog=!this.showDialog},selectEmoji:function(t){this.comment.text+=t.data},getComment:function(t){for(var i=0;i<this.commentsArray.length;i++)if(this.commentsArray[i]._id===t)return this.commentsArray[i]},isAdmin:function(t){return t.permissions.length>0&&"admin"===t.permissions[0]?"admin":"user"},formatDate:function(t){var e=w.utc(t).local();return w(e).format("DD-MM-YYYY h:mm a")},navLogin:function(){this.$router.push({path:"/login"})},navRegister:function(){this.$router.push({path:"/signup"})},navUser:function(t){this.$router.push({path:"/user/".concat(t)})},submitComment:function(){var t=this;if(this.showDialog=!1,this.isBanned)this.$buefy.snackbar.open("You have been banned from posting. Contact via email to appeal.");else{this.buttonDisabled=!0,this.comment.dateTime=new Date;var e="";this.comment.text=this.filterBadwords(this.comment.text);for(var n=!0,i=0;i<this.comment.text.length;i++)"*"!==this.comment.text[i]&&" "!==this.comment.text[i]&&"\n"!==this.comment.text[i]&&(n=!1);n?(this.showUnacceptableCommentMssg=!0,this.buttonDisabled=!1):(this.comment.replyComment=this.replyComment,this.comment.repliesId=[],this.$axios("https://valorantify.com/api/comments",{method:"post",data:this.comment}).then((function(t){return t.data})).then((function(n){void 0!==n.code?(t.$buefy.snackbar.open(n.message),t.buttonDisabled=!0):(e=n._id,t.$axios("https://valorantify.com/"+"api/".concat(t.type,"/").concat(t.id,"?&populateuser=true"),{method:"get",headers:{"content-type":"application/json"}}).then((function(t){return t.data})).then((function(n){if(void 0!==n.code)t.buttonDisabled=!0,t.$buefy.snackbar.open(n.message);else{"forums"===t.type&&(t.forum=n),"matches"===t.type&&(t.match=n);var o=n;o.commentIds.push(e),o.numComments?o.numComments+=1:o.numComments=o.commentIds.length,t.$axios("https://valorantify.com/"+"api/".concat(t.type,"/").concat(t.id),{method:"patch",headers:new Headers({"content-type":"application/json"}),data:o}).then((function(t){return t.data})).then((function(e){t.buttonDisabled=!0,void 0!==e.code?(t.$buefy.snackbar.open(e.message),t.buttonDisabled=!1):("forums"===t.type&&(t.sendForumNotif(e),void 0!==t.replyComment&&t.sendAtMsgNotif(e)),"matches"===t.type&&void 0!==t.replyComment&&t.sendAtMsgNotifMatches(e),"news"===t.type&&void 0!==t.replyComment&&t.sendAtMsgNotifNews(e),window.location.reload())}))}})))})).catch((function(t){t.response&&"jwt expired"===t.response.data.message&&(localStorage.removeItem("auth"),window.location.reload())})))}},sendAtMsgNotifNews:function(t){this.replyComment.user.notifications[this.id]?this.replyComment.user.notifications[this.id].dateTime=t.updatedAt:this.replyComment.user.notifications[this.id]={type:this.type,dateTime:t.updatedAt,text:"Someone has replied to you on a news post!",slug:t.slug},this.$axios("https://valorantify.com/"+"users/".concat(this.replyComment.user._id),{method:"patch",headers:new Headers({"content-type":"application/json"}),data:this.replyComment.user}).then((function(t){return t.data})).then((function(t){}))},sendAtMsgNotifMatches:function(t){this.replyComment.user.notifications[this.id]?this.replyComment.user.notifications[this.id].dateTime=t.updatedAt:this.replyComment.user.notifications[this.id]={type:this.type,dateTime:t.updatedAt,text:"Someone has replied to you on a match post!",slug:t.slug},this.$axios("https://valorantify.com/"+"users/".concat(this.replyComment.user._id),{method:"patch",headers:new Headers({"content-type":"application/json"}),data:this.replyComment.user}).then((function(t){return t.data})).then((function(t){}))},sendAtMsgNotif:function(t){this.forum.user._id!==this.replyComment.user._id&&(this.replyComment.user.notifications[this.id]?this.replyComment.user.notifications[this.id].dateTime=t.updatedAt:this.replyComment.user.notifications[this.id]={type:this.type,dateTime:t.updatedAt,text:"Someone has replied to you on a forum post!",slug:t.slug},this.$axios("https://valorantify.com/"+"users/".concat(this.replyComment.user._id),{method:"patch",headers:new Headers({"content-type":"application/json"}),data:this.replyComment.user}).then((function(t){return t.data})).then((function(t){})))},sendForumNotif:function(t){this.forum.user._id!==this.comment.userId&&(this.forum.user.notifications[this.id]?this.forum.user.notifications[this.id].dateTime=t.updatedAt:this.forum.user.notifications[this.id]={type:this.type,dateTime:t.updatedAt,text:"Someone has commented on a forum post you created!"},this.$axios("https://valorantify.com/"+"users/".concat(this.forum.user._id),{method:"patch",headers:new Headers({"content-type":"application/json"}),data:this.forum.user}).then((function(t){return t.data})).then((function(t){})))},filterBadwords:function(text){var t=new Set(["nigger","nigar","niggar","niger","n1ger","n1gger","n1ggar","nigga","negar","neggar","faggot","faggit","fagot","nigerr","nigarr","fagott","faggit"]);text=text.trim().split(" ");for(var i=0;i<text.length;i++)t.has(text[i].toLowerCase())&&(text[i]="******");return text=text.join(" ")},reply:function(){},shouldHighlight:function(t){var e=this;return setTimeout((function(){e.selectedReply=void 0}),4e3),this.selectedReply&&t===this.selectedReply?"bkg-highlight":""},clickAt:function(t){document.getElementById(t).scrollIntoView(),window.scrollBy(0,-100)},scrollBottom:function(){window.scrollTo(0,document.body.scrollHeight)}},components:{VueMarkdown:r.a,CommentTree:v,VEmojiPicker:c.a}},_=(n(949),Object(y.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.loading?t._e():n("div",{staticClass:"card",staticStyle:{padding:"0px"}},[n("div",{key:t.inc,staticClass:"card-content",staticStyle:{padding:"0px"}},[n("p",{staticStyle:{"text-align":"left",padding:"15px","font-size":"18px","padding-bottom":"0px"}},[n("vue-markdown",[t._v("Comments")])],1),t._v(" "),n("CommentTree",{attrs:{comment:t.commentsArray,depth:0,parent:t.commentsArray,id:t.id,type:t.type,pageData:t.pageData,newUser:t.newUser}}),t._v(" "),t.auth?n("div",[t.replyComment?n("div",{staticStyle:{"text-align":"left","margin-left":"20px"}},[t._v("\n        You are replying to:\n        "),n("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.replyComment.user.username)+" - "+t._s(t.replyComment._id.slice(-2).toUpperCase()))]),t._v(" "),n("i",{staticClass:"fas fa-times",staticStyle:{color:"red","margin-left":"20px",cursor:"pointer"},on:{click:function(e){t.replyComment=void 0}}})]):t._e(),t._v(" "),n("b-field",{staticStyle:{padding:"10px"},attrs:{label:"Leave a Comment"}},[n("b-input",{staticStyle:{resize:"none","white-space":"pre-wrap","word-wrap":"break-word"},attrs:{maxlength:"1500",type:"textarea","icon-right":"emoticon-outline","icon-right-clickable":""},on:{"icon-right-click":t.toogleDialogEmoji},model:{value:t.comment.text,callback:function(e){t.$set(t.comment,"text",e)},expression:"comment.text"}})],1),t._v(" "),n("VEmojiPicker",{directives:[{name:"show",rawName:"v-show",value:t.showDialog,expression:"showDialog"}],staticStyle:{"background-color":"#273142",position:"absolute",right:"0",display:"block","margin-top":"-100px","z-index":"1000"},on:{select:t.selectEmoji}}),t._v(" "),n("div",{},[n("b-button",{staticStyle:{"background-color":"#ff726f","margin-top":"-30px"},attrs:{id:"test",disabled:t.buttonDisabled},on:{click:t.submitComment}},[t._v("Submit")])],1),t._v(" "),n("div",[t.showUnacceptableCommentMssg?n("p",{staticStyle:{color:"red"}},[t._v("Sorry this message is not allowed.")]):t._e()])],1):t._e(),t._v(" "),t.auth?t._e():n("div",{staticStyle:{"margin-top":"20px","font-weight":"bold"}},[n("span",{staticStyle:{cursor:"pointer",color:"#ff726f"},on:{click:function(e){return t.navLogin()}}},[t._v("LOGIN")]),t._v(" or\n      "),n("span",{staticStyle:{cursor:"pointer",color:"#ff726f"},on:{click:function(e){return t.navRegister()}}},[t._v("REGISTER")]),t._v(" to comment!\n    ")])],1)])}),[],!1,null,"579851e6",null));e.a=_.exports},947:function(t,e,n){"use strict";var o=n(722);n.n(o).a},948:function(t,e,n){(e=n(17)(!1)).push([t.i,".table thead[data-v-6fd8a010]{display:none}.table td[data-v-6fd8a010],.table th[data-v-6fd8a010]{border-bottom:1px solid #ff726f!important;border-width:0 0 1px}@media screen and (max-width:640px){.comment-mobile[data-v-6fd8a010]{text-align:left}.icon-comment[data-v-6fd8a010]{margin-right:10px}}.admin[data-v-6fd8a010]{color:#90ee90}.moderator[data-v-6fd8a010]{color:#87ceeb}.input-box[data-v-6fd8a010]{display:flex;align-items:center;justify-content:center}",""]),t.exports=e},949:function(t,e,n){"use strict";var o=n(723);n.n(o).a},950:function(t,e,n){(e=n(17)(!1)).push([t.i,".textarea[data-v-579851e6]{resize:none!important}@media screen and (max-width:640px){.comment-mobile[data-v-579851e6]{text-align:left}.word-mobile[data-v-579851e6]{width:350px}}.admin[data-v-579851e6]{color:green}.bkg-highlight[data-v-579851e6]{background-color:#171e29;border:1px solid #8c67ef!important}.table thead[data-v-579851e6]{display:none}",""]),t.exports=e}}]);