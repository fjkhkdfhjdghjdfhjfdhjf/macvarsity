(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{720:function(t,e,o){var content=o(920);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(18).default)("cce22a18",content,!0,{sourceMap:!1})},919:function(t,e,o){"use strict";var r=o(720);o.n(r).a},920:function(t,e,o){(e=o(17)(!1)).push([t.i,".textarea{resize:none!important}@media screen and (max-width:640px){.comment-mobile{text-align:left}}.admin{color:#90ee90}.moderator{color:#87ceeb}",""]),t.exports=e},960:function(t,e,o){"use strict";o.r(e);o(107),o(108);var r=o(725),n=o(647),c=o.n(n),l=o(0),m={name:"Forums",props:{id:String},data:function(){return{forumsSkip:0,forumsTotal:0,forumTopic:"",auth:""}},head:function(){return{title:"Forum | "+this.forum.title}},asyncData:function(t){var e=t.params;return t.$axios.get(void 0+"api/forums/".concat(e.id,"?&populatecomments=true&populateuser=true")).then((function(t){return{forum:t.data}})).catch((function(t){return console.log(t)}))},mounted:function(){var t=void 0;this.$aes.setKey("SECURE_VAL_PW");var e=localStorage.getItem("auth");e&&(t=JSON.parse(this.$aes.decrypt(e))),t&&(this.auth=t)},methods:{formatDate:function(t){var e=l.utc(t).local();return l(e).format("DD/MM/YY h:mm a")},navUser:function(t){this.$router.push({path:"/user/".concat(t)})},isAdmin:function(t){return t.permissions.length>0&&"admin"===t.permissions[0]?"admin":t&&t.permissions.length>0&&t.permissions.includes("moderator")?"moderator":"user"},deletePost:function(){var t=this;this.$buefy.dialog.confirm({message:"Are you sure you want to delete this post?",type:"is-dark",onConfirm:function(){t.$axios(void 0+"api/forums/".concat(t.$route.params.id),{method:"delete",headers:new Headers({"content-type":"application/json"})}).then((function(t){return t.data})).then((function(e){t.navToForumsHome()}))}})},navToForumsHome:function(){this.$router.push({path:"/forums/"})},movePost:function(){var t=this;""!==this.forumTopic&&this.$buefy.dialog.confirm({message:"Are you sure you want to move this post to "+this.forumTopic+"?",type:"is-dark",onConfirm:function(){t.$axios(void 0+"api/forums/".concat(t.$route.params.id),{method:"patch",headers:{"content-type":"application/json"},data:{type:t.forumTopic}}).then((function(t){return t.data})).then((function(e){t.navToForumsHome()}))}})}},components:{Comments:r.a,VueMarkdown:c.a}},f=(o(919),o(6)),component=Object(f.a)(m,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"hello"},[o("div",{staticClass:"columns is-centered",staticStyle:{"margin-top":"10px"}},[o("div",{staticClass:"column is-narrow"},[o("div",{style:{width:t.$device.isMobile?"":"800px"}},[o("div",{staticClass:"card"},[o("div",{staticClass:"card-content"},[o("h1",{staticClass:"title"},[t._v(t._s(t.forum.title))]),t._v(" "),o("div",[t._v(t._s(t.formatDate(t.forum.updatedAt)))]),t._v(" "),t.forum.user?o("div",{class:t.isAdmin(t.forum.user),staticStyle:{"font-weight":"bold",cursor:"pointer"},on:{click:function(e){return t.navUser(t.forum.user._id)}}},[t.forum.user.hasOwnProperty("flag")&&""!==t.forum.user.flag?o("span",[o("country-flag",{staticStyle:{"vertical-align":"-15px","margin-left":"-20px","margin-right":"-15px"},attrs:{country:t.forum.user.flag,size:"normal"}})],1):t._e(),t._v(" "),t.forum.user.hasOwnProperty("flag")&&""!==t.forum.user.flag?t._e():o("span",[o("country-flag",{staticStyle:{"vertical-align":"-15px","margin-left":"-20px","margin-right":"-15px"},attrs:{country:"un",size:"normal"}})],1),t._v("\n              "+t._s(t.forum.user.username)+"\n            ")]):t._e(),t._v(" "),t.forum.body?o("div",{staticStyle:{"margin-top":"20px",padding:"10px","overflow-wrap":"break-word"}},[o("vue-markdown",{staticStyle:{"text-align":"left"},attrs:{html:!1}},[t._v(t._s(t.forum.body))])],1):t._e(),t._v(" "),t.auth?o("div",{staticStyle:{"margin-top":"50px"}},[t.auth.user.permissions.includes("moderator")?o("div",[o("div",{staticClass:"columns",staticStyle:{"text-align":"left"}},[o("div",{staticStyle:{"padding-right":"0px","text-align":"left"}},[o("b-field",[o("b-select",{staticStyle:{"text-align":"right"},attrs:{placeholder:"Select a character"},model:{value:t.forumTopic,callback:function(e){t.forumTopic=e},expression:"forumTopic"}},[o("option",{staticStyle:{color:"white"},attrs:{value:"valorant"}},[t._v("Valorant Discussions")]),t._v(" "),o("option",{staticStyle:{color:"white"},attrs:{value:"feedback"}},[t._v("Valorantify Feedback")]),t._v(" "),o("option",{staticStyle:{color:"white"},attrs:{value:"offTopic"}},[t._v("Off-Topic")])])],1)],1),t._v(" "),o("div",{staticStyle:{"text-align":"left","padding-right":"0px","margin-left":"30px"}},[o("b-button",{staticStyle:{"margin-left":"0px"},on:{click:function(e){return t.movePost()}}},[t._v("Move post")])],1),t._v(" "),o("div",{staticStyle:{"text-align":"left","margin-left":"80px"}},[o("b-button",{staticStyle:{"margin-left":"0px"},on:{click:function(e){return t.deletePost()}}},[t._v("Delete post")])],1)])]):t._e()]):t._e()])]),t._v(" "),o("client-only",[o("div",{staticClass:"columns is-centered",staticStyle:{"margin-top":"10px"}},[o("div",{staticClass:"column is-narrow"},[o("div",{style:{width:t.$device.isMobile?"":"800px"}},[o("Comments",{attrs:{id:t.$route.params.id,type:"forums",commentsArray:t.forum.comments,pageData:t.forum}})],1)])])])],1)])])])}),[],!1,null,null,null);e.default=component.exports}}]);