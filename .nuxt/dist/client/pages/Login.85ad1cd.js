(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{690:function(e,t,n){var content=n(854);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(18).default)("8b9b1168",content,!0,{sourceMap:!1})},853:function(e,t,n){"use strict";var o=n(690);n.n(o).a},854:function(e,t,n){(t=n(17)(!1)).push([e.i,".type-button[data-v-20095b8c]{width:150px}.button[data-v-20095b8c]{margin-top:20px;margin-bottom:20px}",""]),e.exports=t},942:function(e,t,n){"use strict";n.r(t);var o={layout:"OnlyNav",name:"Characters",props:{type:String},data:function(){return{user:{strategy:"local",email:"",password:""},isDone:!0,verifyEmail:!1}},mounted:function(){},methods:{sendForgot:function(){var e=this;if(""===this.user.email)this.$buefy.snackbar.open("Please enter a valid email!");else{this.isDone=!1;var data={action:"sendResetPwd",value:{email:this.user.email}};this.$axios(void 0+"authmanagement",{method:"post",headers:new Headers({"content-type":"application/json"}),data:data}).then((function(e){return e.data})).then((function(t){void 0!==t.code?e.$buefy.snackbar.open(t.message):e.$buefy.snackbar.open({message:"An email has been sent to ".concat(e.user.email,". Please check your spam!"),duration:15e3}),e.isDone=!0})).catch((function(t){t.response&&e.$buefy.snackbar.open({message:t.response.data.message,duration:5e3})}))}},login:function(){var e=this;this.$axios(void 0+"api/authentication",{method:"post",headers:new Headers({"content-type":"application/json"}),data:this.user}).then((function(e){return e.data})).then((function(t){if(void 0!==t.code)e.$buefy.snackbar.open(t.message);else{0,e.$buefy.snackbar.open("Login successful!"),e.$aes.setKey("SECURE_VAL_PW");var n=e.$aes.encrypt(JSON.stringify(t));localStorage.setItem("auth",n),e.$router.push({path:"/"}),e.$axios.setHeader("Authorization","Bearer ".concat(t.accessToken)),setTimeout((function(){window.location.reload()}),1e3)}})).catch((function(t){return e.$buefy.snackbar.open("Invalid Credentials"),t}))},resend:function(){var e=this;this.$axios(void 0+"users?email=".concat(this.user.email),{method:"get",headers:new Headers({"content-type":"application/json"})}).then((function(e){return e.data})).then((function(t){var n=t.data[0];e.$axios(void 0+"users/"+n._id,{method:"patch",headers:{"content-type":"application/json",resendemail:!0},data:n}).then((function(e){return e.data})).then((function(t){e.$buefy.snackbar.open({message:"Please check email and spam for verification code!",duration:15e3}),e.user={strategy:"local",email:"",password:""}}))}))}},components:{}},r=(n(853),n(6)),component=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hello"},[n("h1",{staticStyle:{"font-size":"50px","margin-bottom":"20px"}},[e._v("Login")]),e._v(" "),n("div",{staticClass:"columns is-centered"},[n("div",{staticClass:"column is-one-fifth"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-content"},[n("div",{staticStyle:{"text-align":"left"}},[n("b-field",{attrs:{label:"Email"}},[n("b-input",{attrs:{placeholder:"Email...",type:"email"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),e._v(" "),n("b-field",{attrs:{label:"Password"}},[n("b-input",{attrs:{placeholder:"Password...",type:"password"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1)],1),e._v(" "),e.verifyEmail?n("p",{staticStyle:{cursor:"pointer",color:"#ff726f","margin-top":"20px"},on:{click:e.resend}},[e._v("Click to resend verification")]):e._e(),e._v(" "),e.isDone?n("p",{staticStyle:{cursor:"pointer",color:"#ff726f","margin-top":"20px"},on:{click:e.sendForgot}},[e._v("Forgot Password?")]):e._e(),e._v(" "),e.isDone?e._e():n("p",{staticStyle:{cursor:"pointer",color:"white","margin-top":"20px"},on:{click:e.sendForgot}},[e._v("Forgot Password?")])]),e._v(" "),n("footer",{staticClass:"card-footer",staticStyle:{height:"60px"}},[n("span",{staticClass:"card-footer-item"},[n("b-button",{staticStyle:{"background-color":"#ff726f"},on:{click:e.login}},[e._v("Submit")])],1)])])])])])}),[],!1,null,"20095b8c",null);t.default=component.exports}}]);